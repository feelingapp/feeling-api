# Implementation Specifics

## Refresh Tokens

| Implementation                | Reason        |
|----------------               |--------       |
|Refresh tokens will have a lifetime of 14 days| It is two much of a hastle if the user has to login everytime they use the app however if the user hasn't used their account in 14 days then asking for a login isn't too much of an inconvenience for the added benefits it provides        
|Upon generation of a new authorisation code all refresh_tokens will become invalidated| This is in the case an attacker is able to steal the refresh_token a user can login again and repeal their access
|access from an IP distant from the previous known IPs should require a new authorisation code and the distant IP will not be able to use it| to make it harder for an attacker to hijack refresh_tokens

## redirect_uri

| Implementation                | Reason        |
|----------------               |--------       |
|the redirect_uri will be dependent on the client_id| To make sure the authorisation token is sent to the right place and not to  an attacker|        
|

## access tokens
| Implementation                | Reason        |
|----------------               |--------       |
|access from an IP distant from the previous known IPs should require a new authorisation code and the distant IP will not be able to use the access_token| to make it harder for an attacker to hijack refresh_tokens

## state
| Implementation | Reason|
|-----           |-----  |
|the state parameter will be sent to the website for the website to send back | this is so we can associate the state parameter with the code challenge  |
|the state parameter will be unique to every client | the state parameter will be associated with the code_challenge and therefore it needs to be unique so that no one else can get a code challenge |
|the state parameter has to be sufficiently large that someone can't create an overlapping state| to stop someone fishing random code_challenges by guessing the state parameter|


## code challenge
| Implementation | Reason|
|---             |---    |
| Code challenges need to expire within 30 seconds of creation| To stop a possible DoS attack to fill up the database with useless code challenges|
